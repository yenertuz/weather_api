<!DOCTYPE html>
<html>
  <head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A weather API that uses the AccuWeather REST API. Use this website to check the weather for your favorite places.">
	<meta name="author" content="Yener Tuz">
	<link rel="icon" href="https://img.icons8.com/dusk/64/000000/app-symbol.png" type="image/gif" sizes="16x16">
	<title>Weather API assignment - Yener Tuz</title>
  </head>
  <body>
	  <div id='root'></div>
  </body>
  <script>
  function get_query_parameters(state) {
    let url_params = new URLSearchParams(window.location.search);
    let zip_code = url_params.get("zip_code");
    let date = url_params.get("date");
    state.zip_code = zip_code;
    state.date = date;
  }

  function fetch_location_key(state) {
    let url = "http://dataservice.accuweather.com/locations/v1/postalcodes/us/search?";
    url += "q=" + encodeURIComponent(state.zip_code);
    url += "&apikey=" + encodeURIComponent(state.api_key);
    let ajax_request = new XMLHttpRequest();
    ajax_request.open("GET", url, true);
    ajax_request.onreadystatechange = () => {
      console.log(this.responseText);
      let response_object = JSON.parse(this.responseText);
      state.location_key = response_object["Key"];
      console.log(state.location_key);
    }
    ajax_request.send();
  }

  function main() {
      let state = {};
      state.api_key = "wJzJStEhgnn6wSVdxvK56XpvFE4sYeoC";
      get_query_parameters(state);
      fetch_location_key(state);
      return ;
      fetch_weather_information(state);
      render_weather_information(state);
  }
  
  main();
  
  </script> 
</html>
